<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>PrÃ¡ctica 2: RetenciÃ³n de Idiomas</title>
    
    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px; background-color: #f4f4f4; }
        .lang-btn { padding: 15px 25px; font-size: 18px; cursor: pointer; margin: 10px; border-radius: 5px; border: none; background: white; shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .lang-btn:hover { background-color: #e0e0e0; }
        #content-area { margin-top: 40px; font-size: 28px; color: #333; font-weight: bold; background: white; padding: 20px; border-radius: 10px; display: inline-block;}
    </style>
</head>
<body>

    <h1>Selector de Idioma / Language / è¨€èª</h1>
    <p>Lee el texto y cambia de idioma. Google medirÃ¡ cuÃ¡nto tardaste.</p>

    <button class="lang-btn" onclick="cambiarIdioma('es')">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
    <button class="lang-btn" onclick="cambiarIdioma('en')">ğŸ‡ºğŸ‡¸ English</button>
    <button class="lang-btn" onclick="cambiarIdioma('fr')">ğŸ‡«ğŸ‡· FranÃ§ais</button>
    <button class="lang-btn" onclick="cambiarIdioma('jp')">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</button>

    <div id="content-area">Hola, bienvenido a la prueba.</div>

    <script>
        // --- LÃ“GICA DEL CRONÃ“METRO ---
        let idiomaActual = 'es';
        let tiempoInicio = Date.now(); 

        const textos = {
            'es': 'Hola, bienvenido a la prueba.',
            'en': 'Hello, welcome to the test.',
            'fr': 'Bonjour, bienvenue au test.',
            'jp': 'ã“ã‚“ã«ã¡ã¯ã€ãƒ†ã‚¹ãƒˆã¸ã‚ˆã†ã“ãã€‚' 
        };

        function cambiarIdioma(nuevoIdioma) {
            if (nuevoIdioma === idiomaActual) return; 

            // 1. MATEMÃTICAS: Calcular tiempo transcurrido
            let tiempoFin = Date.now();
            let segundos = Math.round((tiempoFin - tiempoInicio) / 1000);

            console.log(`Usuario estuvo en ${idiomaActual} por ${segundos} segundos.`);

            // 2. ENVÃO A GA4: Mezclamos Dimensiones y MÃ©tricas
            if (typeof gtag !== 'undefined') {
                gtag('event', 'cambio_de_idioma', {
                    'idioma_anterior': idiomaActual,    // DimensiÃ³n
                    'idioma_nuevo': nuevoIdioma,        // DimensiÃ³n
                    'tiempo_en_idioma': segundos        // MÃ©trica (Â¡NÃºmero!)
                });
            }

            // 3. ACTUALIZAR INTERFAZ
            document.getElementById('content-area').innerText = textos[nuevoIdioma];
            idiomaActual = nuevoIdioma;
            tiempoInicio = Date.now(); // Reiniciar reloj
        }
    </script>
</body>
</html>